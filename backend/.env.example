# ═══════════════════════════════════════════
# SolverNet DEX Backend — Environment Config
# ═══════════════════════════════════════════
# Stack: Render (Node.js) + Supabase (PostgreSQL) + Blockfrost (Cardano) + Upstash (Redis)
# Copy to .env and fill in your values.

# ─── Server ───────────────────────────────
NODE_ENV=development
PORT=3001
HOST=0.0.0.0
# Use "warn" on Render Free (512MB RAM) to reduce memory usage
LOG_LEVEL=info

# ─── Database (Supabase PostgreSQL) ──────
# Format: postgresql://postgres.[project-ref]:[password]@aws-0-[region].pooler.supabase.com:6543/postgres?pgbouncer=true
DATABASE_URL="postgresql://postgres:[YOUR-PASSWORD]@db.[YOUR-PROJECT-REF].supabase.co:5432/postgres"

# ─── Upstash Redis (Cache — optional) ────
# Get your free credentials at: https://console.upstash.com
# Leave empty to run without cache (graceful degradation)
UPSTASH_REDIS_URL=
UPSTASH_REDIS_TOKEN=

# ─── Cardano Network ─────────────────────
CARDANO_NETWORK=preprod

# ─── Blockfrost (Primary chain provider) ─
# Get your free API key at: https://blockfrost.io
BLOCKFROST_URL=https://cardano-preprod.blockfrost.io/api/v0
BLOCKFROST_PROJECT_ID=preprodXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# ─── Smart Contract ──────────────────────
ESCROW_SCRIPT_ADDRESS=
POOL_SCRIPT_ADDRESS=

# ─── Solver ───────────────────────────────
# Solver wallet seed phrase (NEVER commit real seeds!)
SOLVER_SEED_PHRASE=
SOLVER_BATCH_WINDOW_MS=5000
SOLVER_MAX_RETRIES=3
SOLVER_MIN_PROFIT_LOVELACE=100000
SOLVER_ENABLED=false

# ─── CORS ─────────────────────────────────
# Vercel frontend URL (comma-separated for multiple origins)
CORS_ORIGIN=http://localhost:3000,https://your-app.vercel.app

# ─── Rate Limiting ────────────────────────
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX=100

# ─── JWT (for optional auth) ─────────────
JWT_SECRET=change-this-in-production-to-a-random-64-char-hex-string
JWT_EXPIRES_IN=24h

# ─── Chart / OHLCV ───────────────────────
# Interval (ms) for the price snapshot cron job
CHART_SNAPSHOT_INTERVAL_MS=60000
# Maximum candles returned per request (limit memory on free tier)
CHART_MAX_CANDLES=500
